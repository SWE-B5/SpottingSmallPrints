[gd_scene load_steps=52 format=3 uid="uid://bk3qkmqb7sbic"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_6i7u1"]
[ext_resource type="Texture2D" uid="uid://cgp4qmso1hc8y" path="res://assets/mystic_woods/characters/player.png" id="2_2s7u1"]
[ext_resource type="Script" path="res://scripts/map_node.gd" id="3_igln0"]
[ext_resource type="PackedScene" uid="uid://c70emhr8dng6o" path="res://scenes/ui/pause_menu.tscn" id="3_qr3mx"]
[ext_resource type="PackedScene" uid="uid://dd5jllsc5vgnt" path="res://scenes/ui/fade_screen.tscn" id="3_redh7"]
[ext_resource type="Texture2D" uid="uid://demjftbru4syd" path="res://assets/utils/Alert.png" id="5_i6r5b"]

[sub_resource type="AtlasTexture" id="AtlasTexture_7y3j0"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 432, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_uhk8j"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 432, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_k4qn4"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 432, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_dfgk4"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_okcxo"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_4g1qp"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_5mu3r"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_710hl"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_rioy2"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_miu17"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_lfakr"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_xyd80"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_a8w6t"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_2r01c"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bywu4"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_n1ato"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_p23ms"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_kpryr"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ovx5k"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_pyn5p"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_y3yvy"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_3luai"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ffpcq"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ob6hy"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_srdc4"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_1g8p0"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_swb5b"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_x3n4y"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_kks1d"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_080s2"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_wkcfx"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_s6txy"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ab83y"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_fdypt"]
atlas = ExtResource("2_2s7u1")
region = Rect2(0, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ol6wo"]
atlas = ExtResource("2_2s7u1")
region = Rect2(48, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_6qebx"]
atlas = ExtResource("2_2s7u1")
region = Rect2(96, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_w0hli"]
atlas = ExtResource("2_2s7u1")
region = Rect2(144, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_h2q8t"]
atlas = ExtResource("2_2s7u1")
region = Rect2(192, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ktab5"]
atlas = ExtResource("2_2s7u1")
region = Rect2(240, 240, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_yxugu"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7y3j0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uhk8j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k4qn4")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dfgk4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_okcxo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4g1qp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5mu3r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_710hl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rioy2")
}],
"loop": true,
"name": &"down_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_miu17")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lfakr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xyd80")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a8w6t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2r01c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bywu4")
}],
"loop": true,
"name": &"down_walk",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_n1ato")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p23ms")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kpryr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ovx5k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pyn5p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y3yvy")
}],
"loop": true,
"name": &"side_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3luai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ffpcq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ob6hy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_srdc4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1g8p0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_swb5b")
}],
"loop": true,
"name": &"side_walk",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_x3n4y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kks1d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_080s2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wkcfx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s6txy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ab83y")
}],
"loop": true,
"name": &"up_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fdypt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ol6wo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6qebx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w0hli")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h2q8t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ktab5")
}],
"loop": true,
"name": &"up_walk",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_5ef3m"]
radius = 5.0
height = 14.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_k65mb"]
radius = 5.0
height = 14.0

[sub_resource type="Animation" id="Animation_vhkrq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Alert:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_sa6uy"]
resource_name = "alert_animation"
length = 1.8
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Alert:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 1.7, 1.75),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1bd5w"]
_data = {
"RESET": SubResource("Animation_vhkrq"),
"alert_animation": SubResource("Animation_sa6uy")
}

[node name="Player" type="CharacterBody2D" groups=["Player"]]
z_index = 1
y_sort_enabled = true
collision_layer = 17
collision_mask = 17
up_direction = Vector2(0, 1)
script = ExtResource("1_6i7u1")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="FadeScreen" parent="CanvasLayer" instance=ExtResource("3_redh7")]
offset_top = -10.0
offset_bottom = -10.0

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
y_sort_enabled = true
position = Vector2(0, -15)
sprite_frames = SubResource("SpriteFrames_yxugu")
animation = &"side_idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
y_sort_enabled = true
position = Vector2(-0.00200081, 0)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_5ef3m")
one_way_collision_margin = 0.0
debug_color = Color(0.803922, 0.00784314, 1, 0.419608)

[node name="FollowCamera" type="Camera2D" parent="."]
z_index = 1
position = Vector2(-0.00200081, -8)
position_smoothing_enabled = true
position_smoothing_speed = 30.0
rotation_smoothing_enabled = true

[node name="MapCanvasLayer" type="CanvasLayer" parent="."]

[node name="MapNode" type="Node" parent="MapCanvasLayer"]
process_mode = 3
script = ExtResource("3_igln0")

[node name="MapCamera" type="Camera2D" parent="MapCanvasLayer/MapNode"]
z_index = 11
position = Vector2(0, -8)

[node name="PauseCanvasLayer" type="CanvasLayer" parent="."]
process_mode = 3

[node name="PauseUI" type="Node" parent="PauseCanvasLayer"]
process_mode = 3

[node name="PauseMenu" parent="PauseCanvasLayer/PauseUI" instance=ExtResource("3_qr3mx")]
visible = false

[node name="hitbox_gegner" type="Area2D" parent="." groups=["hitbox_player"]]
position = Vector2(-0.00200081, 0)
collision_layer = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="hitbox_gegner"]
rotation = 1.5708
shape = SubResource("CapsuleShape2D_k65mb")
debug_color = Color(0.705882, 0.486275, 0.0666667, 0.419608)

[node name="Alert" type="Sprite2D" parent="."]
position = Vector2(0, -24)
texture = ExtResource("5_i6r5b")
hframes = 6

[node name="AlertPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_1bd5w")
}

[connection signal="animation_finished" from="CanvasLayer/FadeScreen/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="animation_finished" from="AlertPlayer" to="." method="_on_alert_player_animation_finished"]

[editable path="CanvasLayer/FadeScreen"]
